# 快速开始指南

## 🚀 一键部署到 Cloudflare

### 前提条件
- 一个 Cloudflare 账号（免费即可）
- 一个 GitHub 账号

### 部署步骤

#### 1️⃣ 推送代码到 GitHub

```bash
# 在项目目录下执行
git add .
git commit -m "Initial commit: AHR999 Index Website"
git remote add origin https://github.com/你的用户名/ahr999-index.git
git push -u origin main
```

#### 2️⃣ 连接到 Cloudflare Pages

1. 访问 [Cloudflare Dashboard](https://dash.cloudflare.com)
2. 点击左侧菜单 "Workers & Pages"
3. 点击 "Create application"
4. 选择 "Pages" 标签
5. 点击 "Connect to Git"
6. 选择你的 GitHub 仓库
7. 配置构建设置：
   - **项目名称**: `ahr999-index` (或你喜欢的名字)
   - **生产分支**: `main`
   - **构建命令**: 留空
   - **构建输出目录**: `public`
8. 点击 "Save and Deploy"

#### 3️⃣ 创建 KV 存储

1. 在 Cloudflare Dashboard 左侧菜单点击 "KV"
2. 点击 "Create namespace"
3. 输入名称: `AHR999_DATA`
4. 点击 "Add"
5. **记下显示的 Namespace ID**（类似：`a1b2c3d4e5f6...`）

#### 4️⃣ 绑定 KV 到 Pages 项目

1. 返回 "Workers & Pages"
2. 点击你刚创建的项目 `ahr999-index`
3. 点击顶部的 "Settings" 标签
4. 左侧点击 "Functions"
5. 滚动到 "KV namespace bindings"
6. 点击 "Add binding"
7. 填写：
   - **Variable name**: `AHR999_DATA`
   - **KV namespace**: 选择刚才创建的 `AHR999_DATA`
8. 点击 "Save"

#### 5️⃣ 设置定时任务（每小时更新）

1. 在项目设置页面，左侧点击 "Functions"
2. 滚动到 "Cron Triggers"
3. 点击 "Add Cron Trigger"
4. 输入: `0 * * * *`
5. 点击 "Add Trigger"

#### 6️⃣ 初始化数据

首次部署后需要初始化数据，有两种方式：

**方式 A: 访问初始化页面（推荐）**

访问: `https://你的项目.pages.dev/init`

你会看到返回的 JSON 数据，表示初始化成功。

**方式 B: 等待定时任务执行**

等待下一个整点（如现在是 14:35，等到 15:00），定时任务会自动执行并初始化数据。

#### 7️⃣ 验证部署

访问你的网站: `https://你的项目.pages.dev`

你应该能看到：
- ✅ 显示当前 AHR999 指数
- ✅ 显示比特币价格和 200 日均线
- ✅ 显示投资建议
- ✅ 历史数据图表

## 🎨 自定义域名（可选）

1. 在项目设置中，点击 "Custom domains"
2. 点击 "Set up a custom domain"
3. 输入你的域名（如 `ahr999.yourdomain.com`）
4. 按照提示配置 DNS 记录
5. 等待 DNS 生效（通常几分钟）

## 🔧 验证 API 接口

### 获取最新数据
```bash
curl https://你的项目.pages.dev/api/ahr999
```

### 获取历史数据
```bash
curl https://你的项目.pages.dev/api/history
```

## 📊 监控和维护

### 查看运行日志

1. 进入你的 Pages 项目
2. 点击 "Functions" 标签
3. 可以看到所有函数的执行记录和日志

### 查看 KV 存储的数据

1. 在 Cloudflare Dashboard 中进入 "KV"
2. 点击 `AHR999_DATA` 命名空间
3. 可以看到存储的所有键值对
4. 点击 `latest` 可以查看最新的 AHR999 数据

## ⚙️ 常用配置

### 修改更新频率

如果想改为每 30 分钟更新一次：

1. 进入项目设置 -> Functions -> Cron Triggers
2. 删除现有的 `0 * * * *`
3. 添加新的: `*/30 * * * *`

常用的 Cron 表达式：
- `0 * * * *` - 每小时
- `*/30 * * * *` - 每 30 分钟
- `0 */2 * * *` - 每 2 小时
- `0 0 * * *` - 每天午夜

### 手动触发更新

访问: `https://你的项目.pages.dev/init`

## 🐛 常见问题

### 问题 1: 网站显示 "无法获取数据"

**原因**: KV 中还没有数据

**解决**: 访问 `/init` 初始化数据，或等待下一个整点

### 问题 2: API 返回 404

**原因**: Functions 没有正确部署

**解决**: 
1. 确认 `functions/` 目录在项目根目录
2. 重新部署: 在 GitHub 推送一个新提交
3. Cloudflare Pages 会自动重新部署

### 问题 3: 定时任务没有执行

**原因**: Cron Trigger 没有配置或 KV 绑定错误

**解决**:
1. 检查 Settings -> Functions -> Cron Triggers 是否配置
2. 检查 Settings -> Functions -> KV namespace bindings 是否正确
3. 查看 Functions 日志是否有错误信息

### 问题 4: CoinGecko API 调用失败

**原因**: API 速率限制或网络问题

**解决**: 
- CoinGecko 免费 API 有速率限制（50 次/分钟）
- 等待几分钟后自动恢复
- 考虑添加重试逻辑或使用备用 API

## 📈 使用建议

1. **定期查看**: 建议每天查看一次 AHR999 指数
2. **结合其他指标**: AHR999 应该与其他指标结合使用
3. **长期视角**: 该指标适合长期投资，不适合短期交易
4. **分批操作**: 在买入或卖出区间分批操作，降低风险

## 🎯 进阶功能（可选实现）

- 添加邮件通知：当进入抄底/逃顶区间时发送邮件
- 添加 Telegram Bot：实时推送更新
- 添加更多指标：MVRV, NUPL, Rainbow Chart 等
- 添加用户账户：保存个人持仓和收益情况
- 添加多语言支持：英文、日文等

## 💰 成本说明

使用 Cloudflare 免费套餐完全足够：

- ✅ **Pages**: 免费，无限请求
- ✅ **Workers**: 免费 100,000 请求/天
- ✅ **KV**: 免费 100,000 读取/天，1000 写入/天
- ✅ **Cron Triggers**: 免费包含

预估使用量：
- 写入: 24 次/天（每小时更新）
- 读取: 取决于访问量，假设 10,000 次/天

**完全在免费额度内，无需付费！**

## 🎉 完成！

恭喜！你现在拥有一个完全自动化的 AHR999 指数网站了！

- 🌐 全球 CDN 加速
- ⚡ 毫秒级响应
- 🔄 每小时自动更新
- 💯 99.99% 可用性
- 💰 完全免费

## 📞 获取帮助

如果遇到问题：

1. 查看项目的 `README.md`
2. 查看 `DEPLOY.md` 详细部署文档
3. 访问 [Cloudflare Community](https://community.cloudflare.com/)
4. 在 GitHub 上提交 Issue

祝投资顺利！🚀📈
